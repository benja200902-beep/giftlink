<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="robots" content="noindex, nofollow">
    <title>Gift Checkout - Hypixel</title>
    <link rel="icon" type="image/png" href="https://www.tebex.io/favicon.png">
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="">
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700;900&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/@mdi/font@latest/css/materialdesignicons.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/vuetify@3.4.0/dist/vuetify.min.css" rel="stylesheet">
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vuetify@3.4.0/dist/vuetify.min.js"></script>
    <style>
        :root {
            --primary-color: #41C4C3;
            --primary-hover: #35A8A7;
            --bg-sidebar: #FAFAFA;
            --bg-main: #FFFFFF;
            --text-color: #333333;
            --text-muted: #616161;
            --border-color: #E6E6E6;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Lato', sans-serif;
            background-color: var(--bg-main);
            color: var(--text-color);
        }

        .v-application {
            background: var(--bg-main) !important;
        }

        .v-theme--light {
            background: var(--bg-main) !important;
        }

        .v-theme--light .v-toolbar {
            background: var(--bg-sidebar) !important;
            border-bottom: 1px solid var(--border-color) !important;
        }

        .v-theme--light .v-navigation-drawer {
            background: var(--bg-sidebar) !important;
            border-right: 1px solid var(--border-color) !important;
        }

        .v-btn {
            text-transform: none !important;
            font-weight: 600 !important;
        }

        .v-btn--variant-elevated {
            background: var(--primary-color) !important;
            color: white !important;
            border: none !important;
        }

        .v-btn--variant-elevated:hover {
            background: var(--primary-hover) !important;
        }

        .skeleton-loader {
            animation: pulse 1.5s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.4; }
            50% { opacity: 0.8; }
        }

        .product-image {
            width: 100%;
            max-width: 400px;
            height: auto;
            border-radius: 8px;
            margin-bottom: 16px;
        }

        .price-tag {
            font-size: 24px;
            font-weight: bold;
            color: var(--primary-color);
        }

        .mobile-header {
            display: none;
        }

        @media (max-width: 960px) {
            .mobile-header {
                display: block;
            }
            
            .desktop-navigation {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <v-app>
            <!-- Mobile Header -->
            <v-toolbar class="mobile-header" color="white" elevation="1">
                <v-btn icon @click="drawer = !drawer">
                    <v-icon>mdi-menu</v-icon>
                </v-btn>
                <v-toolbar-title>Gift Checkout</v-toolbar-title>
            </v-toolbar>

            <!-- Navigation Drawer for Mobile -->
            <v-navigation-drawer v-model="drawer" temporary>
                <order-summary-content></order-summary-content>
            </v-navigation-drawer>

            <v-main>
                <v-container fluid class="pa-0">
                    <v-row no-gutters>
                        <!-- Sidebar (Desktop) -->
                        <v-col cols="12" md="4" class="desktop-navigation">
                            <v-navigation-drawer permanent width="100%" style="position: relative; height: 100vh;">
                                <order-summary-content></order-summary-content>
                            </v-navigation-drawer>
                        </v-col>

                        <!-- Main Content -->
                        <v-col cols="12" md="8">
                            <v-container class="pa-6">
                                <!-- Skeleton Loader -->
                                <div v-if="loading" class="text-center">
                                    <div class="skeleton-loader">
                                        <v-skeleton-loader type="image" height="200" class="mb-4"></v-skeleton-loader>
                                        <v-skeleton-loader type="heading" width="50%" class="mb-2 mx-auto"></v-skeleton-loader>
                                        <v-skeleton-loader type="text" width="30%" class="mb-4 mx-auto"></v-skeleton-loader>
                                        <v-skeleton-loader type="button" width="200" class="mx-auto"></v-skeleton-loader>
                                    </div>
                                </div>

                                <!-- Product Content -->
                                <div v-else-if="product" class="text-center">
                                    <h1 class="text-h4 mb-6">Gift Checkout</h1>
                                    
                                    <img :src="`https://via.placeholder.com/400x300/${product.color}/FFFFFF?text=${encodeURIComponent(product.name)}`" 
                                         :alt="product.name" 
                                         class="product-image">
                                    
                                    <h2 class="text-h5 mb-2">{{ product.name }}</h2>
                                    
                                    <div class="price-tag mb-6">${{ product.price }}</div>
                                    
                                    <v-btn size="large" @click="applyGift" class="px-8">
                                        Apply Gift
                                    </v-btn>
                                </div>

                                <!-- Error State -->
                                <div v-else class="text-center">
                                    <v-alert type="error" class="mb-4">
                                        Invalid gift code or product not found.
                                    </v-alert>
                                    <v-btn @click="goBack">Go Back</v-btn>
                                </div>
                            </v-container>
                        </v-col>
                    </v-row>
                </v-container>
            </v-main>

            <!-- Footer -->
            <v-footer class="pa-4">
                <v-container>
                    <v-row justify="center">
                        <v-col cols="12" class="text-center">
                            <p class="text-muted mb-0">
                                Powered by <a href="https://tebex.io" target="_blank">Tebex</a> | 
                                <a href="https://hypixel.net" target="_blank">Hypixel</a>
                            </p>
                        </v-col>
                    </v-row>
                </v-container>
            </v-footer>
        </v-app>
    </div>

    <script>
        const { createApp } = Vue;

        // Product data
        const products = [
            { id: 1, name: "16,400 SkyBlock Gems", price: "99.99", color: "41C4C3" },
            { id: 2, name: "3,600 SkyBlock Gems", price: "24.99", color: "41C4C3" },
            { id: 3, name: "11,000 Gold", price: "100.00", color: "FFD700" },
            { id: 4, name: "VIP Rank", price: "6.99", color: "FF6B6B" },
            { id: 5, name: "VIP+ Rank", price: "14.99", color: "FF6B6B" },
            { id: 6, name: "MVP Rank", price: "29.99", color: "4ECDC4" },
            { id: 7, name: "MVP+ Rank", price: "44.99", color: "4ECDC4" },
            { id: 8, name: "MVP++ Rank", price: "7.99", color: "4ECDC4" },
            { id: 9, name: "1,000 Gold", price: "9.99", color: "FFD700" },
            { id: 10, name: "2,500 Gold", price: "25.00", color: "FFD700" },
            { id: 11, name: "5,000 Gold", price: "50.00", color: "FFD700" },
            { id: 12, name: "11,000 Gold", price: "100.00", color: "FFD700" },
            { id: 13, name: "675 SkyBlock Gems", price: "4.99", color: "41C4C3" },
            { id: 14, name: "1,390 SkyBlock Gems", price: "9.99", color: "41C4C3" },
            { id: 15, name: "3,600 SkyBlock Gems", price: "24.99", color: "41C4C3" },
            { id: 16, name: "7,200 SkyBlock Gems", price: "49.99", color: "41C4C3" }
        ];

        // Order Summary Component
        const OrderSummaryContent = {
            template: `
                <div class="pa-4">
                    <h3 class="text-h6 mb-4">Order Summary</h3>
                    <v-divider class="mb-4"></v-divider>
                    <div v-if="product">
                        <p class="font-weight-medium mb-2">{{ product.name }}</p>
                        <p class="text-h6 mb-4">${{ product.price }}</p>
                        <v-divider class="mb-4"></v-divider>
                        <p class="text-h5 font-weight-bold">Total: ${{ product.price }}</p>
                    </div>
                    <div v-else>
                        <p class="text-muted">No product selected</p>
                    </div>
                </div>
            `,
            setup() {
                const { product } = Vue.inject('appState');
                return { product };
            }
        };

        // Main App
        createApp({
            components: {
                OrderSummaryContent
            },
            setup() {
                const loading = Vue.ref(true);
                const product = Vue.ref(null);
                const giftCode = Vue.ref('');
                const drawer = Vue.ref(false);

                const appState = {
                    product,
                    loading,
                    giftCode
                };

                Vue.provide('appState', appState);

                const loadProduct = async () => {
                    loading.value = true;
                    
                    // Get gift code from URL
                    const urlParams = new URLSearchParams(window.location.search);
                    giftCode.value = urlParams.get('gift') || '';
                    
                    // Simulate loading delay
                    await new Promise(resolve => setTimeout(resolve, 1000));
                    
                    // Find product by gift code (using ID as gift code for demo)
                    const productId = parseInt(giftCode.value);
                    const foundProduct = products.find(p => p.id === productId);
                    
                    if (foundProduct) {
                        product.value = foundProduct;
                    }
                    
                    loading.value = false;
                };

                const applyGift = () => {
                    if (giftCode.value) {
                        window.location.href = `https://tebex.lat/confirm_details?gift=${giftCode.value}`;
                    }
                };

                const goBack = () => {
                    window.history.back();
                };

                Vue.onMounted(() => {
                    loadProduct();
                });

                return {
                    loading,
                    product,
                    giftCode,
                    drawer,
                    applyGift,
                    goBack
                };
            }
        }).use(Vuetify).mount('#app');
    </script>
</body>
</html>
