<!DOCTYPE html>
<html lang="es" dir="ltr">
<head>
    <title>Un momento…</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge">
    <meta name="robots" content="noindex,nofollow">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <script>
        window.REDIRECT_URL_BASE = "<%= REDIRECT_URL_BASE %>";
        const path = window.location.pathname;
        const match = path.match(/\/redeem\/([a-z0-9\-]+-[a-z0-9]{16})/);
        if (match) {
            const code = match[1];
            const redirectUrl = window.REDIRECT_URL_BASE + code;
            
            window.onTurnstileSuccess = function(token) {
                console.log('Verificación exitosa:', token);
                document.getElementById('YAOIX7').style.display = 'block';
                document.getElementById('NNbwm6').style.display = 'none';
                document.getElementById('jklY6').style.display = 'none';
                document.getElementById('agxGF2').style.display = 'block';
                
                setTimeout(function() {
                    window.location.href = redirectUrl;
                }, 2000);
            };
        } else {
            document.addEventListener('DOMContentLoaded', function() {
                document.querySelector('.main-content').innerHTML = '<div class="h2">Código de regalo inválido</div>';
            });
        }
    </script>
    <style>
        *{box-sizing:border-box;margin:0;padding:0}
        html{line-height:1.15;-webkit-text-size-adjust:100%;color:#313131;font-family:system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji"}
        body{display:flex;flex-direction:column;height:100vh;min-height:100vh}
        .main-content{margin:8rem auto;padding-left:1.5rem;max-width:60rem}
        @media (width <= 720px){.main-content{margin-top:4rem}}
        .h2{line-height:2.25rem;font-size:1.5rem;font-weight:500}
        @media (width <= 720px){.h2{line-height:1.5rem;font-size:1.25rem}}
        .cf-turnstile{margin:2rem 0}
        .lds-ring{display:inline-block;position:relative;width:64px;height:64px}
        .lds-ring div{box-sizing:border-box;display:block;position:absolute;border:8px solid #fff;border-radius:50%;animation:lds-ring 1.2s cubic-bezier(0.5,0,.5,1) infinite;border-color:#fff transparent transparent transparent}
        .lds-ring div:nth-child(1){animation-delay:-.45s}
        .lds-ring div:nth-child(2){animation-delay:-.3s}
        .lds-ring div:nth-child(3){animation-delay:-.15s}
        @keyframes lds-ring{0%{transform:rotate(0deg)}100%{transform:rotate(360deg)}}
        .spacer{margin:2rem 0}
        .spacer-top{margin-top:4rem}
        .loading-verifying{height:76px}
        .core-msg{line-height:1.5rem}
        .zone-name-title{font-weight:500}
        @media (prefers-color-scheme: dark){body{background-color:#222;color:#d9d9d9}}
    </style>
    <script src="https://challenges.cloudflare.com/turnstile/v0/api.js" async defer></script>
</head>
<body>
    <div class="main-wrapper" role="main">
        <div class="main-content">
            <h1 class="zone-name-title h1">hypixelgift.com</h1>
            <p id="uGwJn1" class="h2 spacer-bottom">Verifique que usted es un ser humano completando la acción a continuación.</p>
            <div id="NNbwm6" style="display: grid;">
                <div>
                    <div class="cf-turnstile" data-sitekey="0x4AAAAAACZwS5q-0Nyl7SH0" data-callback="onTurnstileSuccess"></div>
                </div>
            </div>
            <div id="YAOIX7" class="spacer loading-verifying" style="display: none; visibility: hidden;">
                <div class="lds-ring">
                    <div></div><div></div><div></div><div></div>
                </div>
            </div>
            <div id="jklY6" class="core-msg spacer spacer-top">hypixelgift.com necesita revisar la seguridad de su conexión antes de continuar.</div>
            <div id="agxGF2" style="display: none;">
                <div id="challenge-success-text" class="h2">Verificación exitosa</div>
                <div class="core-msg spacer">Redirigiendo al proceso de pago...</div>
            </div>
        </div>
    </div>
</body>
</html>
